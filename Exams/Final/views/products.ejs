<section class="products-hero">
    <div class="hero-content">
        <h2>Our Collections</h2>
        <p>Explore our signature pieces and latest designs</p>
    </div>
</section>

<% if (typeof success !== 'undefined' && success) { %>
    <div class="alert-success" style="background: #d4edda; color: #155724; border: 1px solid #c3e6cb; padding: 12px 20px; border-radius: 5px; margin: 20px auto; max-width: 600px; text-align: center; font-weight: bold;">
        <%= success %>
    </div>
<% } %>

<section class="product-categories">
    <div class="category-container">
        <% if (products && products.length) { %>
            <% products.forEach(function(product) { %>
                <div class="category-card">
                    <img src="<%= product.imageUrl %>" alt="<%= product.title %>">
                    <h3><%= product.title %></h3>
                    <p>£<%= product.price %></p>
                    <form action="/cart/add" method="POST" style="margin-top: 10px;">
                        <input type="hidden" name="name" value="<%= product.title %>">
                        <input type="hidden" name="image" value="<%= product.imageUrl %>">
                        <input type="hidden" name="price" value="£<%= product.price %>">
                        <button type="submit" class="shop-button">Add to Cart</button>
                    </form>
                </div>
            <% }); %>
        <% } %>
    </div>
</section>

<section class="featured-collections">
    <h2>Featured Collections</h2>
    <div class="collection-grid">
        <div class="collection-card">
            <img src="/images/Women.jpg" alt="Women's Collection">
            <div class="collection-info">
                <h3>Women's Collection</h3>
                <p>Discover the latest in women's luxury fashion</p>
                <a href="#" class="view-collection">View Collection</a>
            </div>
        </div>
        <div class="collection-card">
            <img src="/images/Men.jpg" alt="Men's Collection">
            <div class="collection-info">
                <h3>Men's Collection</h3>
                <p>Explore our curated selection for men</p>
                <a href="#" class="view-collection">View Collection</a>
            </div>
        </div>
    </div>
</section>

<section class="featured-products">
    <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 2rem;">
        <h2 style="text-align: center; margin-bottom: 2rem;">Our Products</h2>
        
        <% if (typeof success !== 'undefined' && success) { %>
            <div style="background-color: #d4edda; color: #155724; padding: 15px; border-radius: 5px; margin-bottom: 20px; text-align: center;">
                <%= success %>
            </div>
        <% } %>
        
        <% if (products && products.length > 0) { %>
            <div class="product-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <% products.forEach(product => { %>
                    <div class="product-card" style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 1.5rem; text-align: center; transition: transform 0.3s ease;">
                        <img src="<%= product.imageUrl %>" alt="<%= product.title %>" style="width: 100%; height: 250px; object-fit: cover; margin-bottom: 1rem; border-radius: 4px;">
                        <h3 style="margin-bottom: 0.5rem; color: #333;"><%= product.title %></h3>
                        <p style="color: #666; margin-bottom: 1rem; font-size: 0.9rem;"><%= product.description %></p>
                        <p class="price" style="font-size: 1.2rem; font-weight: bold; color: #000; margin-bottom: 1rem;">£<%= product.price %></p>
                        
                        <% if (user) { %>
                            <form action="/cart/add" method="POST" style="margin: 0;">
                                <input type="hidden" name="name" value="<%= product.title %>">
                                <input type="hidden" name="image" value="<%= product.imageUrl %>">
                                <input type="hidden" name="price" value="£<%= product.price %>">
                                <button type="submit" class="shop-button" style="background: #000; color: #fff; border: none; padding: 0.75rem 1.5rem; border-radius: 5px; cursor: pointer; font-weight: bold; transition: background-color 0.3s;">Add to Cart</button>
                            </form>
                        <% } else { %>
                            <a href="/login" class="shop-button" style="background: #000; color: #fff; padding: 0.75rem 1.5rem; border-radius: 5px; text-decoration: none; font-weight: bold; display: inline-block;">Login to Buy</a>
                        <% } %>
                    </div>
                <% }); %>
            </div>
        <% } else { %>
            <div style="text-align: center; padding: 3rem;">
                <h3 style="color: #666; margin-bottom: 1rem;">No products available</h3>
                <p style="color: #999;">Check back later for new products.</p>
            </div>
        <% } %>
    </div>
</section>

<style>
.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.shop-button:hover {
    background: #333 !important;
}
</style>